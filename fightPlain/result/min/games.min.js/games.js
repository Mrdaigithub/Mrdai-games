"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();!function(t,e){var i=t,n=e,a=null,s=i.getElementById("canvas"),g=s.getContext("2d"),r=i.getElementById("startBtn"),h=i.getElementById("aboutBtn"),o=i.getElementById("welcome"),c=i.getElementById("pause"),d=!0;s.width=i.body.clientWidth,s.height=i.body.clientHeight,n.onresize=function(){s.width=i.body.clientWidth,s.height=i.body.clientHeight},h.addEventListener("touchstart",function(){alert("Mrdai倾情制作~")},!1),r.addEventListener("touchstart",function(){o.style.display="none",s.style.display="block",c.style.display="block"},!1),c.addEventListener("touchend",function(){d?(c.style.backgroundImage='url("img/Fav_Voice_Play-hd.png")',d=!1):(c.style.backgroundImage='url("img/Fav_Voice_Pause-hd.png")',d=!0)},!1);var u=function(){function t(e,i){_classCallCheck(this,t),this.canvas=e,this.ctx=i,this.fraction=0,this.gameStatus=!1,this.bg={bg1:{img:new Image,x:0,y:0,ready:!1},bg2:{img:new Image,x:0,y:-568,ready:!1},speed:2},this.hero={img:new Image,x:this.canvas.width/2-33,y:this.canvas.height-88,ready:!1,speed:5},this.bg.bg1.img.src="../img/gameArts.png",this.bg.bg2.img.src="../img/gameArts.png",this.hero.img.src="../img/hero.gif",a=this}return _createClass(t,[{key:"processUserInput",value:function(){n.addEventListener("deviceorientation",function(t){var e=n.event||t;console.log(e)},!1)}},{key:"loadBg",value:function(){var t=this;this.bg.bg1.img.onload=function(){return t.bg.bg1.ready=!0},this.bg.bg2.img.onload=function(){return t.bg.bg2.ready=!0}}},{key:"loadHero",value:function(){var t=this;this.hero.img.onload=function(){return t.hero.ready=!0}}},{key:"update",value:function(){this.bg.bg1.y>=568&&(this.bg.bg1.y=-568),this.bg.bg2.y>=568&&(this.bg.bg2.y=-568),this.bg.bg1.y+=this.bg.speed,this.bg.bg2.y+=this.bg.speed}},{key:"render",value:function(){this.ctx.clearRect(0,0,320,568),this.bg.bg1.ready&&this.ctx.drawImage(this.bg.bg1.img,0,0,320,568,this.bg.bg1.x,this.bg.bg1.y,this.canvas.width,this.canvas.height),this.bg.bg2.ready&&this.ctx.drawImage(this.bg.bg2.img,0,0,320,568,this.bg.bg2.x,this.bg.bg2.y,this.canvas.width,this.canvas.height),this.hero.ready&&this.ctx.drawImage(this.hero.img,this.hero.x,this.hero.y,66,80)}},{key:"main",value:function(){a.update(),a.render(),requestAnimationFrame(function(){a.main()})}},{key:"start",value:function(){this.processUserInput(),this.loadBg(),this.loadHero(),this.main()}}]),t}(),l=function(t,e){return new u(t,e)},b=l(s,g);b.start()}(document,window);